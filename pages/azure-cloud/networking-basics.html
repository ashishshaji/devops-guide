<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azure Networking Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #326CE5;
            --secondary: #39A0F4;
            --accent: #FFEB3B;
            --dark: #1e293b;
            --light: #f8fafc;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--light);
            color: var(--dark);
            scroll-behavior: smooth;
        }

        .glass-nav {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(226, 232, 240, 0.8);
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin: 2rem auto;
            background: #fff;
            border-radius: 1.5rem;
            padding: 2.5rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }

        .interactive-block {
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .interactive-block:hover {
            filter: brightness(1.1);
            transform: scale(1.02);
        }

        #componentModal {
            transition: opacity 0.3s ease;
            display: none;
            position: fixed;
            inset: 0;
            z-index: 100;
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(4px);
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        .modal-content {
            transform: scale(0.9);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-width: 600px;
            width: 100%;
        }
        #componentModal.active {
            display: flex;
            opacity: 1;
        }
        #componentModal.active .modal-content {
            transform: scale(1);
        }

        .next-topic-banner { 
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); 
        }

        /* SVG Animation */
        @keyframes pulse {
            0% { stroke-dashoffset: 100; }
            100% { stroke-dashoffset: 0; }
        }
        .flow-line {
            stroke-dasharray: 10;
            animation: pulse 5s linear infinite;
        }

        .vnet-boundary { fill: #f1f5f9; stroke: #cbd5e1; stroke-width: 2; stroke-dasharray: 8,4; }
        .subnet-card { fill: #ffffff; stroke: #e2e8f0; stroke-width: 1; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.05)); }
        .nsg-shield { fill: var(--primary); }
        .label-text { font-size: 11px; font-weight: 700; fill: #64748b; text-transform: uppercase; letter-spacing: 0.05em; }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 4px; }
    </style>
</head>
<body>

    <!-- Navigation -->
    <nav class="glass-nav py-4 px-6 flex justify-between items-center">
        <div class="flex items-center space-x-2">
            <div class="w-8 h-8 bg-[#326CE5] rounded flex items-center justify-center text-white">
                <i class="fas fa-network-wired"></i>
            </div>
            <span class="text-xl font-bold tracking-tight">Azure<span class="text-[#326CE5]">Net</span>Docs</span>
        </div>
        <div class="hidden md:flex space-x-6 font-medium text-slate-600">
            <a href="#vnet" class="hover:text-primary transition">VNet</a>
            <a href="#subnets" class="hover:text-primary transition">Subnets</a>
            <a href="#security" class="hover:text-primary transition">Security</a>
            <a href="#routing" class="hover:text-primary transition">Routing</a>
        </div>
        <button class="bg-[#326CE5] text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-blue-700 transition">
            View Syllabus
        </button>
    </nav>

    <!-- Hero Section -->
    <header class="py-16 px-6 max-w-7xl mx-auto text-center">
        <h1 class="text-4xl md:text-5xl font-extrabold text-slate-900 mb-4">
            The Journey of a Packet
        </h1>
        <p class="text-lg text-slate-600 max-w-2xl mx-auto mb-8">
            Visualize how traffic enters your environment, clears security hurdles, and reaches its destination across isolated subnets.
        </p>
        
        <!-- Updated Architecture Diagram -->
        <div class="chart-container">
            <div class="flex justify-between items-center mb-6">
                <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Traffic Flow: Public → Private</span>
                <div class="flex space-x-4">
                    <div class="flex items-center text-[10px] font-bold text-slate-500 uppercase"><span class="w-2 h-2 rounded-full bg-blue-500 mr-2"></span> Allowed</div>
                    <div class="flex items-center text-[10px] font-bold text-slate-500 uppercase"><span class="w-2 h-2 rounded-full bg-slate-300 mr-2"></span> Isolated</div>
                </div>
            </div>
            
            <svg viewBox="0 0 800 320" class="w-full h-full">
                <!-- Internet Icon -->
                <circle cx="50" cy="160" r="30" fill="#f8fafc" stroke="#e2e8f0" stroke-width="2" />
                <path d="M40 160 Q50 140 60 160 Q50 180 40 160" fill="none" stroke="#64748b" stroke-width="2" />
                <text x="25" y="210" class="label-text" style="font-size: 10px;">Public Internet</text>

                <!-- VNet Boundary -->
                <rect x="120" y="20" width="650" height="280" rx="15" class="vnet-boundary" />
                <text x="140" y="45" class="label-text" style="fill: var(--primary)">Virtual Network (VNet Hub)</text>

                <!-- Flow Line 1 -->
                <path d="M 80 160 L 140 160" stroke="#cbd5e1" stroke-width="2" stroke-dasharray="5,5" class="flow-line" />

                <!-- NSG Point 1 -->
                <g class="interactive-block" onclick="showModal('cidr')">
                    <rect x="140" y="135" width="40" height="50" rx="5" fill="#326CE5" />
                    <text x="146" y="165" fill="white" style="font-size: 8px; font-weight: 800;">NSG 1</text>
                </g>

                <!-- Web Subnet Card -->
                <rect x="220" y="70" width="220" height="180" rx="12" class="subnet-card" />
                <text x="235" y="95" class="label-text" style="fill: var(--secondary)">Subnet: Web-Tier</text>
                <g class="interactive-block" onclick="showModal('vm-web')">
                    <rect x="245" y="125" width="170" height="45" rx="8" fill="#eff6ff" stroke="#326CE5" stroke-opacity="0.2" />
                    <text x="260" y="152" style="font-size: 11px; font-weight: 600; fill: var(--primary);">Web Application VM</text>
                </g>

                <!-- Flow Line 2 -->
                <path d="M 440 160 L 480 160" stroke="#cbd5e1" stroke-width="2" stroke-dasharray="5,5" class="flow-line" />

                <!-- NSG Point 2 -->
                <g class="interactive-block" onclick="showModal('vnet-creation')">
                    <rect x="480" y="135" width="40" height="50" rx="5" fill="#1e293b" />
                    <text x="486" y="165" fill="white" style="font-size: 8px; font-weight: 800;">NSG 2</text>
                </g>

                <!-- DB Subnet Card -->
                <rect x="560" y="70" width="190" height="180" rx="12" class="subnet-card" />
                <text x="575" y="95" class="label-text">Subnet: Data-Tier</text>
                <g class="interactive-block" onclick="showModal('vm-db')">
                    <rect x="575" y="125" width="160" height="45" rx="8" fill="#f8fafc" stroke="#cbd5e1" />
                    <text x="590" y="152" style="font-size: 11px; font-weight: 600; fill: #1e293b;">Database Instance</text>
                </g>

                <!-- Deny Indicator -->
                <circle cx="500" cy="220" r="12" fill="#ef4444" fill-opacity="0.1" stroke="#ef4444" stroke-width="1" />
                <text x="495" y="225" fill="#ef4444" style="font-size: 14px; font-weight: bold;">×</text>
                <text x="460" y="250" style="font-size: 9px; fill: #ef4444; font-weight: 600;">Internet Blocked</text>
            </svg>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-6 pb-24 space-y-20">
        
        <!-- VNet Section -->
        <section id="vnet" class="grid md:grid-cols-2 gap-12 items-center">
            <div>
                <span class="text-blue-600 font-bold uppercase tracking-wider text-sm">Component 01</span>
                <h2 class="text-3xl font-bold mt-2 mb-4">Virtual Network (VNet)</h2>
                <div class="space-y-4 text-slate-600">
                    <p>VNets logically isolate a customer's network within Azure's physical network, ensuring data security and preventing unauthorized access between different customers' resources.</p>
                    <ul class="list-disc pl-5 space-y-2">
                        <li><strong>Logical Isolation:</strong> Your own private space in the cloud.</li>
                        <li><strong>Flexibility:</strong> Create any number of VNets based on organization requirements.</li>
                        <li><strong>Size:</strong> Defined using <span class="bg-blue-100 px-1 rounded text-blue-700 font-mono">CIDR</span> notation.</li>
                    </ul>
                </div>
            </div>
            <div class="grid grid-cols-1 gap-4">
                <div class="interactive-block bg-white p-6 rounded-xl border border-slate-200 border-l-4 border-l-blue-500 shadow-sm" onclick="showModal('cidr')">
                    <h4 class="font-bold flex items-center"><i class="fas fa-calculator mr-2 text-blue-500"></i> CIDR Basics</h4>
                    <p class="text-sm text-slate-500 mt-1">Learn how IP ranges are defined and allocated in Azure.</p>
                </div>
                <div class="interactive-block bg-white p-6 rounded-xl border border-slate-200 border-l-4 border-l-slate-800 shadow-sm" onclick="showModal('vnet-creation')">
                    <h4 class="font-bold flex items-center"><i class="fas fa-plus-circle mr-2 text-slate-800"></i> Creation Workflow</h4>
                    <p class="text-sm text-slate-500 mt-1">Steps and requirements for setting up a new VNet environment.</p>
                </div>
            </div>
        </section>

        <!-- Subnets Section -->
        <section id="subnets" class="bg-white p-8 md:p-12 rounded-3xl shadow-sm border border-slate-100">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold">Subnets & Segmentation</h2>
                <p class="text-slate-600 mt-2">Logically splitting your VNet into manageable, secure parts.</p>
            </div>
            <div class="grid md:grid-cols-3 gap-6">
                <div class="p-6 bg-slate-50 rounded-2xl">
                    <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center shadow-sm mb-4">
                        <i class="fas fa-layer-group text-blue-500"></i>
                    </div>
                    <h4 class="font-bold mb-2 text-slate-800">Logical Splitting</h4>
                    <p class="text-sm text-slate-600 leading-relaxed">Divide applications into layers like Web, Business Logic, and Database tiers for better management.</p>
                </div>
                <div class="p-6 bg-slate-50 rounded-2xl">
                    <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center shadow-sm mb-4">
                        <i class="fas fa-shield-alt text-green-500"></i>
                    </div>
                    <h4 class="font-bold mb-2 text-slate-800">Security Advantages</h4>
                    <p class="text-sm text-slate-600 leading-relaxed">Apply specific rules to each subnet, restricting direct internet access to sensitive databases.</p>
                </div>
                <div class="p-6 bg-slate-50 rounded-2xl">
                    <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center shadow-sm mb-4">
                        <i class="fas fa-expand-arrows-alt text-orange-500"></i>
                    </div>
                    <h4 class="font-bold mb-2 text-slate-800">Size Definition</h4>
                    <p class="text-sm text-slate-600 leading-relaxed">Just like VNets, subnet sizes are defined using CIDR to ensure enough IP addresses for resources.</p>
                </div>
            </div>
        </section>

        <!-- NSG & ASG Section -->
        <section id="security" class="space-y-12">
            <div class="flex flex-col md:flex-row gap-8">
                <div class="flex-1 bg-[#1e293b] text-white p-8 rounded-2xl shadow-xl">
                    <h3 class="text-2xl font-bold mb-4 flex items-center">
                        <span class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center mr-3 text-sm">NSG</span>
                        Network Security Groups
                    </h3>
                    <p class="text-slate-300 mb-6">Controlling inbound and outbound traffic at the subnet or VM instance level.</p>
                    <ul class="space-y-3">
                        <li class="flex items-start text-sm"><i class="fas fa-check-circle text-blue-400 mt-1 mr-2"></i> <span>Customizable rules based on Port, Protocol, and IP.</span></li>
                        <li class="flex items-start text-sm"><i class="fas fa-check-circle text-blue-400 mt-1 mr-2"></i> <span>Default configurations allow for fast onboarding.</span></li>
                        <li class="flex items-start text-sm"><i class="fas fa-check-circle text-blue-400 mt-1 mr-2"></i> <span>Can restrict SSH access to DBs while allowing Web traffic.</span></li>
                    </ul>
                </div>
                <div class="flex-1 border-2 border-dashed border-slate-200 p-8 rounded-2xl flex flex-col justify-center bg-white shadow-sm">
                    <h3 class="text-2xl font-bold mb-4 flex items-center">
                        <span class="w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center mr-3 text-sm text-white">ASG</span>
                        Application Security Groups
                    </h3>
                    <p class="text-slate-600 mb-4 text-sm leading-relaxed">Enhance NSGs by grouping instances logically (e.g., "Business Logic Servers") and apply security rules to these groups, even within the same subnet.</p>
                    <div class="p-4 bg-orange-50 border border-orange-100 rounded-lg text-xs text-orange-800 italic">
                        "Provides more granular control over network access without managing complex IP lists."
                    </div>
                </div>
            </div>
        </section>

        <!-- Route Tables Section -->
        <section id="routing" class="grid md:grid-cols-2 gap-12 items-center">
            <div class="order-2 md:order-1 relative">
                <div class="aspect-square bg-blue-50 rounded-full flex items-center justify-center">
                    <div class="w-3/4 h-3/4 bg-white shadow-xl rounded-2xl p-8 flex flex-col justify-between">
                        <div class="space-y-2">
                            <div class="h-4 w-2/3 bg-slate-100 rounded"></div>
                            <div class="h-4 w-full bg-slate-50 rounded"></div>
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-center space-x-4">
                                <div class="w-10 h-10 bg-green-100 rounded flex items-center justify-center text-green-600"><i class="fas fa-route"></i></div>
                                <div class="text-xs font-mono font-bold text-slate-500">UDR: 10.0.1.0/24 <br> Gateway: Firewall</div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="w-10 h-10 bg-blue-100 rounded flex items-center justify-center text-blue-600"><i class="fas fa-arrow-right"></i></div>
                                <div class="text-xs font-mono font-bold text-slate-500">Internet: 0.0.0.0/0 <br> Status: Redirected</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="order-1 md:order-2">
                <span class="text-blue-600 font-bold uppercase tracking-wider text-sm">Traffic Control</span>
                <h2 class="text-3xl font-bold mt-2 mb-4">Route Tables & UDR</h2>
                <p class="text-slate-600 mb-6 leading-relaxed">User-Defined Routes (UDR) define how traffic should flow within a subnet, essentially providing directions for network communication to reach specific resources.</p>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <h4 class="font-bold mb-2 text-slate-800">Key Function:</h4>
                    <p class="text-sm text-slate-500 italic">"They define exactly how traffic should flow, ensuring packets don't get lost and follow the desired security path (like passing through a Firewall)."</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer Banner -->
    <footer class="next-topic-banner py-16 px-6 text-center text-white">
        <h2 class="text-2xl font-bold mb-4">Deep Dive into CIDR?</h2>
        <p class="text-slate-400 mb-8 max-w-lg mx-auto">Learn the math behind subnet masks and IP allocation to design enterprise-grade networks.</p>
        <div class="flex flex-wrap justify-center gap-4">
            <a href="#" class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-xl font-bold transition shadow-lg">Watch CIDR Video</a>
            <a href="https://github.com" class="bg-slate-700 hover:bg-slate-600 px-6 py-3 rounded-xl font-bold transition"><i class="fab fa-github mr-2"></i> Course Repo</a>
        </div>
    </footer>

    <!-- Modal System -->
    <div id="componentModal">
        <div class="modal-content bg-white rounded-2xl shadow-2xl overflow-hidden">
            <div class="p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                <h3 id="modalTitle" class="text-xl font-bold text-slate-800">Details</h3>
                <button onclick="closeModal()" class="w-8 h-8 rounded-full hover:bg-slate-200 flex items-center justify-center text-slate-400 transition">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="p-8">
                <div id="modalBody" class="text-slate-600 leading-relaxed text-sm">
                    <!-- Content injected by JS -->
                </div>
            </div>
            <div class="p-6 bg-slate-50 text-right">
                <button onclick="closeModal()" class="bg-slate-800 text-white px-6 py-2 rounded-lg font-bold hover:bg-slate-900 transition">Close</button>
            </div>
        </div>
    </div>

    <script>
        const modalData = {
            'vm-web': {
                title: 'Web Application Layer',
                body: 'The Web Subnet hosts your internet-facing resources. NSG rules here typically allow HTTP (80) and HTTPS (443) traffic. In this diagram, the <strong>allowed path</strong> shows traffic successfully clearing the first security gate to reach the app.'
            },
            'vm-db': {
                title: 'Database Layer',
                body: 'A protected subnet. Security rules strictly block direct internet access (shown by the <strong>RED DENY</strong> indicator). Traffic is only allowed if it originates from the Web Application tier and passes the second NSG checkpoint.'
            },
            'cidr': {
                title: 'CIDR & Network Security',
                body: 'CIDR defines the IP range. NSGs use these ranges to filter traffic. For example, you can write a rule that says "Only allow traffic from Subnet A (10.0.1.0/24) to Subnet B (10.0.2.0/24)".'
            },
            'vnet-creation': {
                title: 'Granular Control with ASGs',
                body: 'Application Security Groups (ASGs) let you group servers by role. Instead of saying "Allow traffic from 10.0.1.5", you say "Allow traffic from Web-Servers". This keeps your network clean and readable as you scale.'
            }
        };

        function showModal(id) {
            const data = modalData[id];
            if (!data) return;

            document.getElementById('modalTitle').innerText = data.title;
            document.getElementById('modalBody').innerHTML = data.body;
            document.getElementById('componentModal').classList.add('active');
            document.body.style.overflow = 'hidden'; 
        }

        function closeModal() {
            document.getElementById('componentModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        window.onclick = function(event) {
            const modal = document.getElementById('componentModal');
            if (event.target == modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>