<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes Architecture: The Brain & The Body</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #326CE5;
            --secondary: #39A0F4;
            --accent: #FFEB3B;
            --dark: #1e293b;
            --light: #f8fafc;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--light);
            color: var(--dark);
        }

        .glass-nav {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(226, 232, 240, 0.8);
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }

        /* Interactive Component Styling */
        .interactive-block {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .interactive-block:hover {
            transform: translateY(-2px);
            filter: brightness(0.95);
        }

        /* Modal Animation */
        #componentModal {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        #componentModal.active {
            display: flex !important;
            opacity: 1;
        }
        #componentModal.active .modal-content {
            transform: scale(1);
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 4px; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 antialiased">

    <!-- SHARED NAVIGATION HEADER -->
    <nav class="glass-nav sticky top-0 z-50 py-4 px-6 mb-0">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <a href="index.html" class="flex items-center gap-2 group">
                <div class="bg-blue-600 p-2 rounded-lg text-white group-hover:bg-slate-900 transition-colors">
                    <i class="fas fa-arrow-left"></i>
                </div>
                <div class="flex flex-col">
                    <span class="text-[10px] font-bold text-blue-600 uppercase tracking-tighter leading-none">Back to</span>
                    <span class="text-sm font-bold text-slate-900 leading-tight">Visual Library</span>
                </div>
            </a>
            <div class="flex items-center gap-3 text-right">
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Interactive Guide</p>
                <p class="text-xs font-bold text-slate-700">Architecture Library</p>
            </div>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <header class="bg-gradient-to-r from-blue-700 to-cyan-500 text-white p-12 text-center shadow-lg mb-12">
        <h1 class="text-5xl font-bold mb-4">Kubernetes Architecture</h1>
        <p class="text-xl opacity-90 max-w-2xl mx-auto">Click any component below to explore its secret function.</p>
    </header>

    <main class="container mx-auto px-4 max-w-6xl space-y-20 pb-20">

        <!-- SECTION: THE ARCHITECTURE (Interactive Diagram) -->
        <section>
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-slate-800 mb-2">The Cluster Anatomy</h2>
                <p class="text-slate-600">Explore the relationship between the <strong>Control Plane</strong> and <strong>Worker Nodes</strong>.</p>
            </div>

            <!-- CSS Grid Diagram -->
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 bg-slate-200 p-6 rounded-2xl border border-slate-300">
                
                <!-- CONTROL PLANE (Master) -->
                <div class="lg:col-span-5 bg-white rounded-xl shadow-md border-t-4 border-blue-600 p-6 flex flex-col gap-4 relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded-bl uppercase">Master</div>
                    <div class="text-center mb-2">
                        <h3 class="text-xl font-bold text-blue-700"><i class="fas fa-brain mr-2"></i>Control Plane</h3>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div onclick="showDetails('api')" class="interactive-block col-span-2 bg-blue-50 border border-blue-200 p-3 rounded-lg text-center shadow-sm">
                            <h4 class="font-bold text-blue-800 text-sm">API Server</h4>
                            <p class="text-[10px] text-slate-600">Click to expand</p>
                        </div>
                        <div onclick="showDetails('scheduler')" class="interactive-block bg-indigo-50 border border-indigo-200 p-3 rounded-lg text-center shadow-sm">
                            <h4 class="font-bold text-indigo-800 text-sm">Scheduler</h4>
                            <p class="text-[10px] text-slate-600">Click to expand</p>
                        </div>
                        <div onclick="showDetails('controller')" class="interactive-block bg-indigo-50 border border-indigo-200 p-3 rounded-lg text-center shadow-sm">
                            <h4 class="font-bold text-indigo-800 text-sm">Controller</h4>
                            <p class="text-[10px] text-slate-600">Click to expand</p>
                        </div>
                        <div onclick="showDetails('etcd')" class="interactive-block col-span-2 bg-amber-50 border border-amber-200 p-3 rounded-lg text-center shadow-sm">
                            <h4 class="font-bold text-amber-800 text-sm">etcd</h4>
                            <p class="text-[10px] text-slate-600">Click to expand</p>
                        </div>
                    </div>
                </div>

                <!-- CONNECTOR -->
                <div class="lg:col-span-2 flex flex-col justify-center items-center text-slate-400">
                    <div class="hidden lg:block border-t-2 border-dashed border-slate-400 w-full relative top-4"></div>
                    <span class="bg-slate-200 px-2 z-10 font-mono text-[10px] text-center uppercase tracking-widest">Internal Sync</span>
                    <div class="hidden lg:block border-t-2 border-dashed border-slate-400 w-full relative bottom-4"></div>
                </div>

                <!-- DATA PLANE (Worker) -->
                <div class="lg:col-span-5 bg-white rounded-xl shadow-md border-t-4 border-green-600 p-6 flex flex-col gap-4 relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded-bl uppercase">Worker</div>
                    <div class="text-center mb-2">
                        <h3 class="text-xl font-bold text-green-700"><i class="fas fa-hard-hat mr-2"></i>Data Plane</h3>
                    </div>

                    <div class="space-y-4">
                        <div class="flex gap-4">
                            <div onclick="showDetails('kubelet')" class="interactive-block flex-1 bg-green-50 border border-green-200 p-3 rounded-lg text-center shadow-sm">
                                <h4 class="font-bold text-green-800 text-sm">Kubelet</h4>
                                <p class="text-[10px] text-slate-600">Click to expand</p>
                            </div>
                            <div onclick="showDetails('proxy')" class="interactive-block flex-1 bg-green-50 border border-green-200 p-3 rounded-lg text-center shadow-sm">
                                <h4 class="font-bold text-green-800 text-sm">Kube-Proxy</h4>
                                <p class="text-[10px] text-slate-600">Click to expand</p>
                            </div>
                        </div>

                        <div onclick="showDetails('pods')" class="interactive-block bg-slate-50 border-2 border-dashed border-slate-300 p-4 rounded-lg hover:border-blue-400">
                            <p class="text-xs text-center text-slate-400 mb-2 font-mono">Container Runtime</p>
                            <div class="flex justify-center gap-2">
                                <div class="bg-white border border-slate-200 shadow-sm p-2 rounded w-16 text-center">
                                    <i class="fas fa-box text-blue-500 mb-1"></i>
                                    <div class="text-[10px] font-bold">Pod</div>
                                </div>
                                <div class="bg-white border border-slate-200 shadow-sm p-2 rounded w-16 text-center">
                                    <i class="fas fa-box text-blue-500 mb-1"></i>
                                    <div class="text-[10px] font-bold">Pod</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- OTHER SECTIONS (Charts/Timeline) -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            <div class="space-y-6">
                <div class="border-l-4 border-blue-600 pl-4">
                    <h2 class="text-3xl font-bold text-slate-800">Capability Landscape</h2>
                </div>
                <p class="text-lg leading-relaxed text-slate-600">Kubernetes provides the scaffolding required for modern, resilient applications that can't be achieved with single-host solutions.</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-100">
                <div class="chart-container">
                    <canvas id="comparisonChart"></canvas>
                </div>
            </div>
        </section>
    </main>

    <!-- MODAL POPUP -->
    <div id="componentModal" class="hidden fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] items-center justify-center p-4 opacity-0 transition-opacity">
        <div class="modal-content bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden relative">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-slate-400 hover:text-slate-600 text-xl">
                <i class="fas fa-times"></i>
            </button>
            <div id="modalHeader" class="p-6 text-white bg-blue-600">
                <h3 id="modalTitle" class="text-2xl font-bold">Component Name</h3>
            </div>
            <div class="p-6 space-y-4">
                <div class="flex items-center gap-3 text-blue-600 font-bold uppercase tracking-widest text-[10px]">
                    <i class="fas fa-info-circle"></i> Functional Role
                </div>
                <p id="modalDescription" class="text-slate-600 leading-relaxed"></p>
                <div class="bg-slate-50 p-4 rounded-lg border border-slate-100">
                    <p class="text-[10px] font-bold text-slate-400 uppercase mb-1">Key Responsibility</p>
                    <ul id="modalList" class="text-sm text-slate-700 space-y-1 list-disc list-inside"></ul>
                </div>
            </div>
            <div class="p-4 bg-slate-50 border-t border-slate-100 flex justify-end">
                <button onclick="closeModal()" class="px-6 py-2 bg-slate-800 text-white rounded-lg font-bold text-sm hover:bg-slate-900 transition-colors">Got it</button>
            </div>
        </div>
    </div>

    <footer class="bg-slate-800 text-slate-300 py-8 text-center">
        <p class="text-xs text-slate-500 uppercase tracking-widest">DevOps Architecture Series • Interactive Version</p>
    </footer>

    <script>
        const componentData = {
            api: {
                title: 'Kube-API Server',
                color: 'bg-blue-600',
                desc: 'The front-end of the control plane and the only component that communicates with the etcd database. All internal and external communications go through the API Server.',
                tasks: ['Validates and configures data', 'Handles RESTful requests', 'Authentication & Authorization']
            },
            scheduler: {
                title: 'Kube-Scheduler',
                color: 'bg-indigo-600',
                desc: 'The "Matchmaker" of the cluster. It watches for newly created Pods that have no assigned node and selects the best node for them to run on.',
                tasks: ['Resource filtering', 'Node scoring', 'Policy enforcement']
            },
            controller: {
                title: 'Controller Manager',
                color: 'bg-indigo-600',
                desc: 'The "State Police." It runs controller processes that watch the shared state of the cluster through the API server and make changes attempting to move the current state towards the desired state.',
                tasks: ['Node monitoring', 'Replica management', 'Endpoint tracking']
            },
            etcd: {
                title: 'etcd (Database)',
                color: 'bg-amber-600',
                desc: 'The "Truth" of the cluster. A consistent and highly-available key-value store used as Kubernetes’ backing store for all cluster data.',
                tasks: ['Configuration storage', 'State persistence', 'Backup & recovery point']
            },
            kubelet: {
                title: 'Kubelet',
                color: 'bg-green-600',
                desc: 'The "On-site Manager." An agent that runs on each node in the cluster. It ensures that containers are running in a Pod and are healthy.',
                tasks: ['Manages Pod lifecycle', 'Reports node health', 'Interfaces with Container Runtime']
            },
            proxy: {
                title: 'Kube-Proxy',
                color: 'bg-green-600',
                desc: 'The "Network Traffic Controller." A network proxy that runs on each node in your cluster, implementing part of the Kubernetes Service concept.',
                tasks: ['Maintains network rules', 'Allows Pod-to-Pod communication', 'Handles load balancing']
            },
            pods: {
                title: 'Pods & Runtime',
                color: 'bg-slate-600',
                desc: 'The smallest deployable units of computing that you can create and manage in Kubernetes. They hold the actual application containers.',
                tasks: ['Co-located containers', 'Shared network/storage', 'Scaling units']
            }
        };

        function showDetails(key) {
            const data = componentData[key];
            const modal = document.getElementById('componentModal');
            document.getElementById('modalTitle').innerText = data.title;
            document.getElementById('modalDescription').innerText = data.desc;
            document.getElementById('modalHeader').className = `p-6 text-white ${data.color}`;
            
            const list = document.getElementById('modalList');
            list.innerHTML = '';
            data.tasks.forEach(task => {
                const li = document.createElement('li');
                li.innerText = task;
                list.appendChild(li);
            });

            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('componentModal').classList.remove('active');
        }

        // Close on backdrop click
        window.onclick = function(event) {
            const modal = document.getElementById('componentModal');
            if (event.target == modal) closeModal();
        }

        // Initialize Radar Chart
        const ctxRadar = document.getElementById('comparisonChart').getContext('2d');
        new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: ['Self Healing', 'Auto Scaling', 'Networking', 'Security', 'Enterprise Ready'],
                datasets: [{
                    label: 'Kubernetes',
                    data: [9, 10, 9, 8, 10],
                    backgroundColor: 'rgba(50, 108, 229, 0.2)',
                    borderColor: '#326CE5',
                    pointBackgroundColor: '#326CE5'
                }]
            },
            options: { responsive: true, maintainAspectRatio: false }
        });
    </script>
</body>
</html>